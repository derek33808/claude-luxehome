# Luxehome × 1688 选品整合设计文档

> 创建日期：2026-01-29
> 状态：已确认，待开发

## 项目概述

将 1688 选品与 Luxehome 电商平台整合，实现从选品到上架的半自动化流程。

### 核心目标
- 从 1688 选品 → 半自动抓取数据 → AI 生成英文内容 → 上架 Luxehome
- 目标市场：新西兰、澳洲
- 产品标准：小巧轻便、≤500 RMB

---

## 已确认决策

| 决策项 | 用户选择 |
|--------|----------|
| 数据获取 | 半自动（浏览器插件） |
| 图片处理 | AI 去除/替换文字 + 只选无文字图片 |
| 部署方式 | 手动触发 git push |
| 批量抓取 | 单个抓取即可 |
| 价格倍率 | 3-4 倍（成本 ¥100 → 售价 $65-90 AUD） |
| 供应商信息 | 需要保留（后台记录，前台不显示） |

---

## 整体流程设计

```
┌─────────────────────────────────────────────────────────────────┐
│  Phase 1: 选品                                                   │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │ 浏览 1688   │ →  │ 浏览器插件  │ →  │ 一键抓取    │         │
│  │ 找到好产品  │    │ 点击抓取    │    │ 产品数据    │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│  Phase 2: AI 处理（Claude Code 执行）                            │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │ 翻译标题    │    │ 生成描述    │    │ 价格换算    │         │
│  │ 和基本信息  │    │ 卖点、规格  │    │ RMB→AUD/NZD │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
│  ┌─────────────┐    ┌─────────────┐                            │
│  │ 图片筛选    │    │ AI 处理     │                            │
│  │ 选无文字图  │    │ 去除中文    │                            │
│  └─────────────┘    └─────────────┘                            │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│  Phase 3: 人工审核                                               │
│  ┌─────────────────────────────────────────────────────┐       │
│  │ Claude Code 展示生成的产品数据，用户确认或修改       │       │
│  └─────────────────────────────────────────────────────┘       │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│  Phase 4: 上架                                                   │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │ 更新        │ →  │ 用户手动    │ →  │ Netlify     │         │
│  │ products.json│    │ git push    │    │ 自动部署    │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
```

---

## 开发任务分解

### Task 1: 浏览器插件开发（Chrome Extension）

**功能**：在 1688 产品页面一键抓取产品数据

**抓取的数据**：
```typescript
interface Raw1688Product {
  // 基本信息
  title: string              // 产品标题（中文）
  price: number              // 价格（RMB）
  priceRange?: string        // 价格区间
  minOrder: number           // 最小起订量

  // 图片
  images: string[]           // 产品图片 URL 列表
  mainImage: string          // 主图

  // 详情
  description: string        // 产品描述（中文）
  specifications: Record<string, string>  // 规格参数

  // 物流相关
  weight?: string            // 重量
  size?: string              // 尺寸
  shippingInfo?: string      // 物流信息

  // 供应商
  supplierName: string       // 供应商名称
  supplierUrl: string        // 供应商链接

  // 元数据
  sourceUrl: string          // 1688 产品链接
  capturedAt: string         // 抓取时间
}
```

**输出方式**：
- 复制到剪贴板（JSON 格式）
- 或保存为本地文件

**技术实现**：
- Chrome Manifest V3
- Content Script 提取页面数据
- Popup UI 显示抓取结果

**预计文件**：
```
tools/chrome-extension/1688-scraper/
├── manifest.json
├── content.js        # 页面数据提取
├── popup.html        # 插件界面
├── popup.js          # 界面逻辑
└── styles.css
```

---

### Task 2: AI 内容生成模块

**输入**：Raw1688Product（中文数据）

**输出**：Luxehome Product（英文、多币种）

**AI 处理内容**：

| 处理项 | 输入 | 输出 |
|--------|------|------|
| 标题翻译 | 中文标题 | SEO 友好的英文标题 |
| 描述生成 | 中文描述 | 英文产品描述（300字） |
| 卖点提取 | 规格+描述 | 5-8 个核心卖点 |
| 规格翻译 | 中文规格 | 英文规格表 |
| FAQ 生成 | 产品信息 | 5 个常见问题 |
| 价格换算 | RMB 价格 | AUD/NZD/USD 价格 |
| 分类匹配 | 产品类型 | Luxehome 分类 |

**价格换算逻辑**：
```
成本 = 1688价格 + 国际运费估算 + 平台费用
售价 = 成本 × 加价倍率（3-4 倍）

示例：
- 1688 价格: ¥100 RMB
- 国际运费估算: ¥50 RMB（根据重量/体积）
- 总成本: ¥150 RMB ≈ $33 AUD
- 建议售价: $99-129 AUD
```

**Prompt 模板**：
```
你是一个专业的电商产品文案专家。请将以下 1688 中文产品信息转换为面向澳新市场的英文电商内容。

原始数据：
{raw1688Product}

请生成：
1. 英文产品名称（SEO 友好，包含关键词）
2. 短描述（50字以内）
3. 详细描述（300字，突出卖点和使用场景）
4. 5-8 个核心卖点（带图标建议）
5. 英文规格表
6. 5 个 FAQ
7. 建议标签（用于分类和搜索）

注意：
- 面向澳新消费者，使用地道英文表达
- 突出品质感，避免廉价感
- 强调实用性和生活品质提升
```

---

### Task 3: 图片处理

**策略 1：优先选择无文字图片**
- 从抓取的图片列表中筛选
- 优先选择产品实拍图、白底图
- 避免带营销文字的图片

**策略 2：AI 图片处理（备选）**
- 使用 AI 图像编辑工具去除中文文字
- 可选工具：
  - Stability AI Inpainting
  - Photoshop AI 生成填充
  - 在线工具如 Cleanup.pictures

**图片下载和存储**：
```
public/images/products/{product-slug}/
├── main.jpg          # 主图
├── angle.jpg         # 角度图
├── detail.jpg        # 细节图
└── in-use.jpg        # 使用场景图
```

---

### Task 4: 数据转换和上架

**数据转换**：Raw1688Product → Luxehome Product

```typescript
// Luxehome Product 结构
interface LuxehomeProduct {
  id: string
  slug: string
  name: string
  shortDescription: string
  description: string
  category: 'tech' | 'lifestyle' | 'kitchen' | 'outdoor'
  brand: string
  images: Array<{ url: string; alt: string }>
  features: Array<{ icon?: string; title: string; description: string }>
  specifications: Record<string, string>
  prices: {
    au: { price: number; comparePrice?: number }
    nz: { price: number; comparePrice?: number }
    us: { price: number; comparePrice?: number }
  }
  inStock: boolean
  rating: number
  reviewCount: number
  tags: string[]

  // 内部数据（不显示在前台）
  _supplier?: {
    platform: '1688'
    name: string           // 供应商名称
    url: string            // 1688 店铺链接
    productUrl: string     // 1688 产品链接
    costRMB: number        // 成本价（人民币）
    shippingEstimate: number  // 预估运费
    notes?: string         // 备注
    capturedAt: string     // 抓取时间
  }
}
```

**上架流程**：
1. Claude Code 生成产品数据
2. 展示给用户审核
3. 用户确认后更新 `src/data/json/products.json`
4. 用户手动 `git push` 触发 Netlify 部署

---

## 实施计划

### Phase 1: 浏览器插件（1-2 天）
- [ ] 创建 Chrome Extension 项目结构
- [ ] 实现 1688 页面数据提取
- [ ] 实现复制到剪贴板功能
- [ ] 测试不同类型产品页面

### Phase 2: 上架工作流（1 天）
- [ ] 定义 AI Prompt 模板
- [ ] 实现数据转换逻辑
- [ ] 实现图片下载和存储
- [ ] 测试完整上架流程

### Phase 3: 选品平台改进（可选，后续）
- [ ] 添加 1688 数据源支持
- [ ] 添加"导出到 Luxehome"功能
- [ ] 产品管理界面

---

## 使用方式（完成后）

### 日常上架流程

```bash
# 1. 在 1688 找到好产品，用插件抓取数据

# 2. 告诉 Claude Code
你：帮我上架这个产品
    [粘贴插件抓取的 JSON 数据]

# Claude Code 自动：
# - 翻译和生成英文内容
# - 下载并处理图片
# - 计算多币种价格
# - 更新 products.json
# - 展示结果让你审核

# 3. 确认后手动部署
git add .
git commit -m "Add new product: xxx"
git push
```

---

## 关键文件清单

| 文件 | 用途 |
|------|------|
| `tools/chrome-extension/1688-scraper/` | 浏览器插件 |
| `projects/software/luxehome/src/data/json/products.json` | 产品数据 |
| `projects/software/luxehome/public/images/products/` | 产品图片 |
| `projects/software/luxehome/INTEGRATION_DESIGN.md` | 本设计文档 |

---

## 验证方式

1. **插件测试**：在 3 个不同 1688 产品页面测试抓取
2. **内容生成测试**：AI 生成的英文内容质量检查
3. **完整流程测试**：从抓取到上架的端到端测试
4. **线上验证**：部署后检查产品页面显示

---

## 未来扩展（Phase 4+）

### AI 自动上架功能

实现全自动上架，无需人工干预：

```
定时任务/手动触发
      ↓
AI 自动从 1688 获取产品数据
      ↓
AI 自动生成英文内容、处理图片、换算价格
      ↓
AI 自动更新 products.json
      ↓
AI 自动 git commit & push
      ↓
Netlify 自动部署
      ↓
新产品上线
```

**实现方式**：
1. **Anthropic API 调用**：全自动，按量付费（约 ¥0.1-0.3/产品）
2. **Claude Code 批处理**：半自动，用订阅额度

**批量上架支持**：
- 一次处理多个产品 URL
- 队列管理和进度显示
- 失败重试机制

---

### 订单采购流程（核心！）

**问题**：收到 Luxehome 订单后，需要知道去哪里采购

**解决方案**：每个产品都记录 1688 供应商信息

```
┌─────────────────────────────────────────────────────────────────┐
│  上架阶段：记录供应商数据                                         │
│  ┌─────────────────────────────────────────────────────┐       │
│  │  products.json 中的 _supplier 字段：                  │       │
│  │  - 1688 产品链接 (productUrl)                        │       │
│  │  - 供应商名称 (name)                                 │       │
│  │  - 供应商店铺链接 (url)                              │       │
│  │  - 成本价 (costRMB)                                  │       │
│  │  - 预估运费 (shippingEstimate)                       │       │
│  └─────────────────────────────────────────────────────┘       │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│  收到订单：查看采购信息                                           │
│  ┌─────────────────────────────────────────────────────┐       │
│  │  管理后台显示：                                       │       │
│  │  - 客户订单详情                                       │       │
│  │  - 对应的 1688 采购链接（一键跳转）                    │       │
│  │  - 成本价和预估利润                                   │       │
│  └─────────────────────────────────────────────────────┘       │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│  采购阶段                                                        │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │ 点击1688链接 │ →  │ 下单到集运仓 │ →  │ 记录采购单号 │         │
│  │ (手动/自动)  │    │             │    │             │         │
│  └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────┘
```

---

### 管理后台增强（订单采购视图）

在现有订单管理后台增加采购信息显示：

```
┌────────────────────────────────────────────────────────────────┐
│  订单详情 #LH-20260129-001                                      │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  客户信息                                                       │
│  ├── 姓名: John Smith                                          │
│  ├── 邮箱: john@example.com                                    │
│  └── 地址: 123 Queen St, Auckland, NZ                          │
│                                                                │
│  订单商品                                                       │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │ 商品: Smart Digital Calendar                              │ │
│  │ 数量: 1                                                   │ │
│  │ 售价: NZD $429                                            │ │
│  │                                                           │ │
│  │ 📦 采购信息                                               │ │
│  │ ├── 1688链接: [点击采购] ← 一键跳转                        │ │
│  │ ├── 供应商: 深圳XX科技                                    │ │
│  │ ├── 成本: ¥168 RMB                                       │ │
│  │ ├── 预估运费: ¥50 RMB                                    │ │
│  │ └── 预估利润: NZD $180 (42%)                             │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                │
│  操作                                                          │
│  [标记已采购]  [更新物流单号]  [发送发货通知]                    │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

---

### 自动 1688 下单功能（未来）

当 Luxehome 收到订单后，自动在 1688 下单采购：

```
Luxehome 订单 → 读取 _supplier 信息 → 打开 1688 产品页
                                           ↓
                                   自动填写收货地址（集运仓）
                                           ↓
                                   生成 1688 订单（人工确认支付）
                                           ↓
                                   记录采购单号到订单
                                           ↓
                                   同步物流信息到 Luxehome
```

**技术方案**：
1. **浏览器自动化**：使用 Playwright 模拟 1688 下单操作
2. **集运仓地址**：预设澳新集运仓地址
3. **订单关联**：Luxehome 订单 ↔ 1688 采购单映射
4. **安全控制**：支付环节需人工确认

**实现条件**：
- 需要 1688 登录态管理
- 需要集运服务商合作
- 需要订单管理后台完善

**预计开发时间**：2-3 周（在基础功能稳定后）
